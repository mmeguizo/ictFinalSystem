# Backend Ticket System - Visual Flow Diagrams

## 1. MIS Ticket Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER SUBMITS MIS FORM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: submit-ticket.page.ts                                        â”‚
â”‚  - User fills form (title, description, category, checkboxes)          â”‚
â”‚  - Validates: title (min 5), description (min 10)                      â”‚
â”‚  - Clicks submit                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GraphQL Mutation: createMISTicket                                      â”‚
â”‚  Input: {                                                               â”‚
â”‚    title: "Need new website for department"                            â”‚
â”‚    description: "We need a modern website..."                          â”‚
â”‚    category: WEBSITE                                                    â”‚
â”‚    websiteNewRequest: true                                              â”‚
â”‚    priority: MEDIUM (optional, defaults to MEDIUM)                     â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend: ticket.resolvers.ts â†’ createMISTicket                         â”‚
â”‚  - Check authentication (context.user)                                  â”‚
â”‚  - Extract userId from JWT token                                        â”‚
â”‚  - Pass to service layer                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service: ticket.service.ts â†’ createMISTicket()                         â”‚
â”‚  Step 1: Generate ticket number                                         â”‚
â”‚    repository.generateTicketNumber(MIS)                                 â”‚
â”‚    â†’ Checks today's tickets â†’ Returns: MIS-20251209-001                â”‚
â”‚                                                                          â”‚
â”‚  Step 2: Calculate SLA fields                                           â”‚
â”‚    priority = MEDIUM                                                    â”‚
â”‚    dueDate = calculateDueDate(MEDIUM) â†’ Now + 72 hours                 â”‚
â”‚    estimatedDuration = calculateEstimatedDuration(MIS, MEDIUM) â†’ 16hrs â”‚
â”‚                                                                          â”‚
â”‚  Step 3: Create database records                                        â”‚
â”‚    prisma.ticket.create({                                               â”‚
â”‚      ticketNumber: "MIS-20251209-001",                                  â”‚
â”‚      type: MIS,                                                         â”‚
â”‚      title: "Need new website...",                                      â”‚
â”‚      description: "We need a modern...",                                â”‚
â”‚      priority: MEDIUM,                                                  â”‚
â”‚      dueDate: "2025-12-12T15:30:00Z",                                   â”‚
â”‚      estimatedDuration: 16,                                             â”‚
â”‚      createdById: 5,                                                    â”‚
â”‚      misTicket: {                                                       â”‚
â”‚        create: {                                                        â”‚
â”‚          category: WEBSITE,                                             â”‚
â”‚          websiteNewRequest: true,                                       â”‚
â”‚          websiteUpdate: false,                                          â”‚
â”‚          softwareNewRequest: false,                                     â”‚
â”‚          softwareUpdate: false,                                         â”‚
â”‚          softwareInstall: false                                         â”‚
â”‚        }                                                                â”‚
â”‚      }                                                                  â”‚
â”‚    })                                                                   â”‚
â”‚    â†’ Returns Ticket with id: 42                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service: auto-assignment.service.ts â†’ assignTicket(42, MIS)           â”‚
â”‚                                                                          â”‚
â”‚  Step 1: Get eligible roles                                             â”‚
â”‚    MIS tickets â†’ [DEVELOPER, ADMIN]                                     â”‚
â”‚                                                                          â”‚
â”‚  Step 2: Query eligible users with their workload                       â”‚
â”‚    prisma.user.findMany({                                               â”‚
â”‚      where: { role: { in: [DEVELOPER, ADMIN] } },                      â”‚
â”‚      include: { assignedTickets: { where: { active } } }               â”‚
â”‚    })                                                                   â”‚
â”‚    â†’ Returns:                                                           â”‚
â”‚       User 3 (Developer): 5 active tickets                              â”‚
â”‚       User 7 (Developer): 2 active tickets  â† SELECTED (least load)   â”‚
â”‚       User 1 (Admin): 8 active tickets                                  â”‚
â”‚                                                                          â”‚
â”‚  Step 3: Create assignment                                              â”‚
â”‚    prisma.ticketAssignment.create({                                     â”‚
â”‚      ticketId: 42,                                                      â”‚
â”‚      userId: 7                                                          â”‚
â”‚    })                                                                   â”‚
â”‚                                                                          â”‚
â”‚  Step 4: Update ticket status                                           â”‚
â”‚    prisma.ticket.update({                                               â”‚
â”‚      where: { id: 42 },                                                 â”‚
â”‚      data: { status: ASSIGNED }                                         â”‚
â”‚    })                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service: ticket.service.ts â†’ Fetch complete ticket                     â”‚
â”‚  repository.findById(42)                                                â”‚
â”‚  â†’ Returns full ticket with:                                            â”‚
â”‚     - Basic fields (title, description, status, priority)              â”‚
â”‚     - createdBy user object                                             â”‚
â”‚     - misTicket details                                                 â”‚
â”‚     - assignments array with user objects                               â”‚
â”‚     - notes (empty array)                                               â”‚
â”‚     - attachments (empty array)                                         â”‚
â”‚     - statusHistory (empty array)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Response to Frontend                                                    â”‚
â”‚  {                                                                      â”‚
â”‚    id: 42,                                                              â”‚
â”‚    ticketNumber: "MIS-20251209-001",                                    â”‚
â”‚    type: "MIS",                                                         â”‚
â”‚    title: "Need new website for department",                           â”‚
â”‚    status: "ASSIGNED",                                                  â”‚
â”‚    priority: "MEDIUM",                                                  â”‚
â”‚    dueDate: "2025-12-12T15:30:00Z",                                     â”‚
â”‚    createdBy: { id: 5, name: "John Doe", email: "john@chmsu.edu.ph" }, â”‚
â”‚    misTicket: {                                                         â”‚
â”‚      category: "WEBSITE",                                               â”‚
â”‚      websiteNewRequest: true,                                           â”‚
â”‚      websiteUpdate: false,                                              â”‚
â”‚      ...                                                                â”‚
â”‚    },                                                                   â”‚
â”‚    assignments: [                                                       â”‚
â”‚      { user: { id: 7, name: "Jane Dev", role: "DEVELOPER" } }          â”‚
â”‚    ],                                                                   â”‚
â”‚    notes: [],                                                           â”‚
â”‚    createdAt: "2025-12-09T15:30:00Z"                                    â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: Display Success                                              â”‚
â”‚  - Show success notification                                            â”‚
â”‚  - Display ticket number: MIS-20251209-001                              â”‚
â”‚  - Navigate to ticket detail page                                       â”‚
â”‚  - User sees: "Assigned to Jane Dev"                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. Ticket Status Update Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer views ticket MIS-20251209-001                                â”‚
â”‚  Current status: ASSIGNED                                               â”‚
â”‚  Clicks "Start Work" button                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GraphQL Mutation: updateTicketStatus                                   â”‚
â”‚  {                                                                      â”‚
â”‚    ticketId: 42,                                                        â”‚
â”‚    input: {                                                             â”‚
â”‚      status: IN_PROGRESS,                                               â”‚
â”‚      comment: "Starting website design and development"                â”‚
â”‚    }                                                                    â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Repository: ticket.repository.ts â†’ updateStatus()                      â”‚
â”‚                                                                          â”‚
â”‚  Step 1: Get current ticket                                             â”‚
â”‚    currentTicket = { status: ASSIGNED, ... }                            â”‚
â”‚                                                                          â”‚
â”‚  Step 2: Execute Transaction                                            â”‚
â”‚    prisma.$transaction([                                                â”‚
â”‚      // Update ticket                                                   â”‚
â”‚      prisma.ticket.update({                                             â”‚
â”‚        where: { id: 42 },                                               â”‚
â”‚        data: {                                                          â”‚
â”‚          status: IN_PROGRESS,                                           â”‚
â”‚          updatedAt: now                                                 â”‚
â”‚        }                                                                â”‚
â”‚      }),                                                                â”‚
â”‚                                                                          â”‚
â”‚      // Create history entry                                            â”‚
â”‚      prisma.ticketStatusHistory.create({                                â”‚
â”‚        data: {                                                          â”‚
â”‚          ticketId: 42,                                                  â”‚
â”‚          userId: 7,                                                     â”‚
â”‚          fromStatus: ASSIGNED,                                          â”‚
â”‚          toStatus: IN_PROGRESS,                                         â”‚
â”‚          comment: "Starting website design and development",            â”‚
â”‚          createdAt: now                                                 â”‚
â”‚        }                                                                â”‚
â”‚      })                                                                 â”‚
â”‚    ])                                                                   â”‚
â”‚                                                                          â”‚
â”‚  Both operations succeed or both fail (atomicity)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database State After Transaction                                       â”‚
â”‚                                                                          â”‚
â”‚  Ticket (id: 42)                                                        â”‚
â”‚  â””â”€ status: IN_PROGRESS âœ“                                               â”‚
â”‚  â””â”€ updatedAt: 2025-12-09T16:00:00Z                                     â”‚
â”‚                                                                          â”‚
â”‚  TicketStatusHistory (new entry)                                        â”‚
â”‚  â””â”€ fromStatus: ASSIGNED                                                â”‚
â”‚  â””â”€ toStatus: IN_PROGRESS                                               â”‚
â”‚  â””â”€ comment: "Starting website design..."                               â”‚
â”‚  â””â”€ user: Jane Dev                                                      â”‚
â”‚  â””â”€ createdAt: 2025-12-09T16:00:00Z                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: Ticket Detail Page Updates                                   â”‚
â”‚  - Status badge changes from "Assigned" â†’ "In Progress"                â”‚
â”‚  - Timeline shows new entry:                                            â”‚
â”‚    "Jane Dev changed status to In Progress - 1 minute ago"             â”‚
â”‚    "Starting website design and development"                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. Multi-User Collaboration with Notes

```
User Story: Multiple staff working on same ticket, adding updates

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Developer A    â”‚         â”‚   Developer B    â”‚         â”‚   Office Head    â”‚
â”‚   (Assigned)     â”‚         â”‚   (Added later)  â”‚         â”‚   (Supervisor)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                            â”‚                            â”‚
         â”‚ 1. createTicket            â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ Auto-assigned to Dev A     â”‚                            â”‚
         â”‚ status: ASSIGNED           â”‚                            â”‚
         â”‚                            â”‚                            â”‚
         â”‚ 2. updateStatus            â”‚                            â”‚
         â”‚    â†’ IN_PROGRESS           â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚                            â”‚
         â”‚ 3. addTicketNote           â”‚                            â”‚
         â”‚    "Started database       â”‚                            â”‚
         â”‚     design"                â”‚                            â”‚
         â”‚    isInternal: false       â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚                            â”‚
         â”‚                            â”‚ 4. assignTicket            â”‚
         â”‚                            â”‚    (Office Head adds Dev B)â”‚
         â”‚                            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚                            â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
         â”‚ Both see: 2 assigned users â”‚                            â”‚
         â”‚                            â”‚                            â”‚
         â”‚                            â”‚ 5. addTicketNote           â”‚
         â”‚                            â”‚    "Working on frontend    â”‚
         â”‚                            â”‚     components"            â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ Dev A sees Dev B's note    â”‚                            â”‚
         â”‚                            â”‚                            â”‚
         â”‚ 6. addTicketNote           â”‚                            â”‚
         â”‚    "Database complete,     â”‚                            â”‚
         â”‚     ready for integration" â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚ Dev B sees Dev A's update  â”‚
         â”‚                            â”‚                            â”‚
         â”‚                            â”‚                            â”‚
         â”‚                            â”‚                            â”‚ 7. addTicketNote
         â”‚                            â”‚                            â”‚    "Good progress
         â”‚                            â”‚                            â”‚     team!"
         â”‚                            â”‚                            â”‚    isInternal: true
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ Only staff see this internal note, not ticket creator   â”‚
         â”‚                            â”‚                            â”‚
         â”‚ 8. updateStatus            â”‚                            â”‚
         â”‚    â†’ RESOLVED              â”‚                            â”‚
         â”‚    "Website deployed to    â”‚                            â”‚
         â”‚     production"            â”‚                            â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                            â”‚                            â”‚
         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚           All users notified: ticket resolved           â”‚
         â”‚                                                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Final Database State:

Ticket #42 (MIS-20251209-001)
â”œâ”€ status: RESOLVED
â”œâ”€ resolvedAt: 2025-12-15T10:00:00Z
â”‚
â”œâ”€ TicketAssignments (2)
â”‚  â”œâ”€ User 7 (Developer A) - assigned: 2025-12-09
â”‚  â””â”€ User 9 (Developer B) - assigned: 2025-12-10
â”‚
â”œâ”€ TicketNotes (4)
â”‚  â”œâ”€ Note 1: Dev A - "Started database design" (public)
â”‚  â”œâ”€ Note 2: Dev B - "Working on frontend..." (public)
â”‚  â”œâ”€ Note 3: Dev A - "Database complete..." (public)
â”‚  â””â”€ Note 4: Office Head - "Good progress team!" (internal only)
â”‚
â””â”€ TicketStatusHistory (3)
   â”œâ”€ PENDING â†’ ASSIGNED (auto-assignment)
   â”œâ”€ ASSIGNED â†’ IN_PROGRESS (Dev A)
   â””â”€ IN_PROGRESS â†’ RESOLVED (Dev A with comment)
```

## 4. Dashboard Analytics Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin opens Dashboard page                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend makes 2 parallel queries:                                     â”‚
â”‚  1. ticketAnalytics({ filter: { startDate: "2025-12-01" } })           â”‚
â”‚  2. slaMetrics()                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                               â”‚
                â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Query 1: Analytics       â”‚   â”‚  Query 2: SLA Metrics                 â”‚
â”‚                           â”‚   â”‚                                       â”‚
â”‚  Repository runs:         â”‚   â”‚  Repository runs:                     â”‚
â”‚                           â”‚   â”‚                                       â”‚
â”‚  prisma.ticket.groupBy({  â”‚   â”‚  prisma.ticket.count({                â”‚
â”‚    by: ['status'],        â”‚   â”‚    where: {                           â”‚
â”‚    where: {               â”‚   â”‚      dueDate: { lt: now },            â”‚
â”‚      createdAt: {         â”‚   â”‚      status: { notIn: [RESOLVED,...] }â”‚
â”‚        gte: "2025-12-01"  â”‚   â”‚    }                                  â”‚
â”‚      }                    â”‚   â”‚  })  â†’ overdue: 3                     â”‚
â”‚    },                     â”‚   â”‚                                       â”‚
â”‚    _count: true           â”‚   â”‚  prisma.ticket.count({                â”‚
â”‚  })                       â”‚   â”‚    where: {                           â”‚
â”‚  â†“                        â”‚   â”‚      dueDate: { gte: today_start,     â”‚
â”‚  [                        â”‚   â”‚                 lt: today_end }       â”‚
â”‚    { status: PENDING,     â”‚   â”‚    }                                  â”‚
â”‚      _count: 5 },         â”‚   â”‚  })  â†’ dueToday: 7                    â”‚
â”‚    { status: IN_PROGRESS, â”‚   â”‚                                       â”‚
â”‚      _count: 12 },        â”‚   â”‚  prisma.ticket.count({                â”‚
â”‚    { status: RESOLVED,    â”‚   â”‚    where: {                           â”‚
â”‚      _count: 45 }         â”‚   â”‚      dueDate: { lt: now + 3days }     â”‚
â”‚  ]                        â”‚   â”‚    }                                  â”‚
â”‚                           â”‚   â”‚  })  â†’ dueSoon: 15                    â”‚
â”‚  Similarly for:           â”‚   â”‚                                       â”‚
â”‚  - byType (MIS/ITS)       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  - byPriority             â”‚                   â”‚
â”‚                           â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
                â”‚                               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Combined Response to Frontend                                          â”‚
â”‚                                                                          â”‚
â”‚  {                                                                      â”‚
â”‚    ticketAnalytics: {                                                   â”‚
â”‚      total: 62,                                                         â”‚
â”‚      byStatus: [                                                        â”‚
â”‚        { status: PENDING, count: 5 },                                   â”‚
â”‚        { status: IN_PROGRESS, count: 12 },                              â”‚
â”‚        { status: RESOLVED, count: 45 }                                  â”‚
â”‚      ],                                                                 â”‚
â”‚      byType: [                                                          â”‚
â”‚        { type: MIS, count: 35 },                                        â”‚
â”‚        { type: ITS, count: 27 }                                         â”‚
â”‚      ],                                                                 â”‚
â”‚      byPriority: [                                                      â”‚
â”‚        { priority: CRITICAL, count: 3 },                                â”‚
â”‚        { priority: HIGH, count: 15 },                                   â”‚
â”‚        { priority: MEDIUM, count: 30 },                                 â”‚
â”‚        { priority: LOW, count: 14 }                                     â”‚
â”‚      ]                                                                  â”‚
â”‚    },                                                                   â”‚
â”‚    slaMetrics: {                                                        â”‚
â”‚      overdue: 3,                                                        â”‚
â”‚      dueToday: 7,                                                       â”‚
â”‚      dueSoon: 15                                                        â”‚
â”‚    }                                                                    â”‚
â”‚  }                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Dashboard Components                                          â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Status Distribution (Pie Chart)                                 â”‚   â”‚
â”‚  â”‚  - Pending: 8%                                                    â”‚   â”‚
â”‚  â”‚  - In Progress: 19%                                               â”‚   â”‚
â”‚  â”‚  - Resolved: 73%                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  SLA Alerts (Card with badges)                                   â”‚   â”‚
â”‚  â”‚  âš ï¸  Overdue: 3 tickets                                           â”‚   â”‚
â”‚  â”‚  ğŸ”” Due Today: 7 tickets                                          â”‚   â”‚
â”‚  â”‚  ğŸ“… Due Soon: 15 tickets                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ticket Type Split (Bar Chart)                                   â”‚   â”‚
â”‚  â”‚  MIS:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 35                                   â”‚   â”‚
â”‚  â”‚  ITS:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 27                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5. Auto-Assignment Decision Tree

```
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   New Ticket    â”‚
                            â”‚   Created       â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  What type of ticket?  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                 â”‚
                â–¼                                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  MIS Ticket  â”‚                  â”‚  ITS Ticket  â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                 â”‚
               â–¼                                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Eligible Roles:      â”‚          â”‚ Eligible Roles:      â”‚
    â”‚ - DEVELOPER          â”‚          â”‚ - OFFICE_HEAD        â”‚
    â”‚ - ADMIN              â”‚          â”‚ - ADMIN              â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                 â”‚
           â”‚                                 â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Query all eligible users       â”‚
        â”‚  with their active assignments  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Example Results:               â”‚
        â”‚                                 â”‚
        â”‚  User 1 (Admin)                 â”‚
        â”‚  â””â”€ Active tickets: 8           â”‚
        â”‚                                 â”‚
        â”‚  User 3 (Developer)             â”‚
        â”‚  â””â”€ Active tickets: 5           â”‚
        â”‚                                 â”‚
        â”‚  User 7 (Developer)             â”‚
        â”‚  â””â”€ Active tickets: 2  â† Pick  â”‚
        â”‚                                 â”‚
        â”‚  User 9 (Office Head)           â”‚
        â”‚  â””â”€ Active tickets: 4           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Sort by workload (ascending)   â”‚
        â”‚  Select first user (least load) â”‚
        â”‚  â†’ User 7 with 2 tickets        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Create Assignment:             â”‚
        â”‚  - ticketId: 42                 â”‚
        â”‚  - userId: 7                    â”‚
        â”‚  - assignedAt: now              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Update Ticket Status:          â”‚
        â”‚  PENDING â†’ ASSIGNED             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Complete â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Edge Cases Handled:
1. No eligible users found â†’ Throw error, ticket stays PENDING
2. All users have same workload â†’ First one selected (deterministic)
3. User deleted/disabled â†’ Not included in query results
4. Ticket manually assigned â†’ Auto-assignment skipped
```

## 6. Database Table Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      User        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ email            â”‚                   â”‚
â”‚ name             â”‚                   â”‚
â”‚ role             â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
         â”‚                             â”‚
         â”‚ createdBy                   â”‚ userId
         â”‚                             â”‚
         â–¼                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚        Ticket                â”‚      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚
â”‚ id (PK)                      â”‚      â”‚
â”‚ ticketNumber (unique)        â”‚      â”‚
â”‚ type (MIS/ITS)               â”‚      â”‚
â”‚ title                        â”‚      â”‚
â”‚ description                  â”‚      â”‚
â”‚ status                       â”‚      â”‚
â”‚ priority                     â”‚      â”‚
â”‚ dueDate                      â”‚      â”‚
â”‚ estimatedDuration            â”‚      â”‚
â”‚ actualDuration               â”‚      â”‚
â”‚ createdById (FK â†’ User.id)   â”‚â”€â”€â”€â”€â”€â”€â”˜
â”‚ createdAt                    â”‚
â”‚ updatedAt                    â”‚
â”‚ resolvedAt                   â”‚
â”‚ closedAt                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                   â”‚
    â”‚ ticketId                          â”‚ ticketId
    â”‚ (1:1)                             â”‚ (1:1)
    â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MISTicket      â”‚        â”‚     ITSTicket        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)          â”‚        â”‚ id (PK)              â”‚
â”‚ ticketId (FK)    â”‚        â”‚ ticketId (FK)        â”‚
â”‚ category         â”‚        â”‚ borrowRequest        â”‚
â”‚ websiteNew...    â”‚        â”‚ borrowDetails        â”‚
â”‚ websiteUpdate    â”‚        â”‚ maintenanceDesktop   â”‚
â”‚ softwareNew...   â”‚        â”‚ maintenanceNetwork   â”‚
â”‚ softwareUpdate   â”‚        â”‚ maintenancePrinter   â”‚
â”‚ softwareInstall  â”‚        â”‚ maintenanceDetails   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”‚
         â”‚ ticketId (1:N)
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚                â”‚                  â”‚
    â–¼                     â–¼                â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ticket      â”‚   â”‚ TicketNote   â”‚  â”‚ Ticket       â”‚  â”‚ TicketStatus   â”‚
â”‚ Assignment  â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ Attachment   â”‚  â”‚ History        â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚ id (PK)      â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)     â”‚   â”‚ ticketId (FK)â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)        â”‚
â”‚ ticketId(FK)â”‚   â”‚ userId (FK)  â”‚  â”‚ ticketId(FK) â”‚  â”‚ ticketId (FK)  â”‚
â”‚ userId (FK) â”‚   â”‚ content      â”‚  â”‚ filename     â”‚  â”‚ userId (FK)    â”‚
â”‚ assignedAt  â”‚   â”‚ isInternal   â”‚  â”‚ originalName â”‚  â”‚ fromStatus     â”‚
â”‚             â”‚   â”‚ createdAt    â”‚  â”‚ mimeType     â”‚  â”‚ toStatus       â”‚
â”‚ Unique:     â”‚   â”‚ updatedAt    â”‚  â”‚ size         â”‚  â”‚ comment        â”‚
â”‚ (ticketId,  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ url          â”‚  â”‚ createdAt      â”‚
â”‚  userId)    â”‚                     â”‚ createdAt    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                                   
     â”‚ userId (N:1)
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚
                                         â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  User  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7. SLA Timeline Example

```
Timeline for CRITICAL Priority Ticket (4-hour SLA)

Created: 09:00 AM
â”‚
â”œâ”€ 09:00 AM  [CREATED]
â”‚  - ticketNumber: MIS-20251209-001
â”‚  - priority: CRITICAL
â”‚  - dueDate: 01:00 PM (09:00 + 4 hours)
â”‚  - estimatedDuration: 3 hours
â”‚  - getSLAStatus() â†’ 'on-track' (4 hours remaining)
â”‚
â”œâ”€ 09:15 AM  [AUTO-ASSIGNED]
â”‚  - Assigned to Developer with least workload
â”‚  - status: PENDING â†’ ASSIGNED
â”‚
â”œâ”€ 10:00 AM  [STARTED]
â”‚  - Developer marks status: IN_PROGRESS
â”‚  - getSLAStatus() â†’ 'on-track' (3 hours remaining)
â”‚
â”œâ”€ 11:30 AM  [PROGRESS UPDATE]
â”‚  - Note added: "70% complete, testing phase"
â”‚  - getSLAStatus() â†’ 'on-track' (1.5 hours remaining)
â”‚
â”œâ”€ 12:30 PM  [WARNING ZONE]
â”‚  - getSLAStatus() â†’ 'at-risk' (30 mins remaining)
â”‚  - System highlights ticket in yellow
â”‚  - Notification sent to supervisor
â”‚
â”œâ”€ 12:50 PM  [RESOLVED]
â”‚  - Developer marks status: RESOLVED
â”‚  - resolvedAt: 12:50 PM
â”‚  - actualDuration: 3 hours 50 mins
â”‚  - SLA Met: âœ“ (10 minutes before deadline)
â”‚  - getSLAStatus() â†’ resolved within SLA
â”‚
â””â”€ 01:00 PM  [DEADLINE]
   - Original dueDate
   - Ticket already resolved
   - Compliance: 100%

Alternative Timeline (SLA Breach):

Created: 09:00 AM
â”‚
â”œâ”€ 09:00 AM  [CREATED] (dueDate: 01:00 PM)
â”‚
â”œâ”€ 09:30 AM  [ASSIGNED]
â”‚
â”œâ”€ 11:00 AM  [STARTED]
â”‚  - getSLAStatus() â†’ 'on-track'
â”‚
â”œâ”€ 12:30 PM  [WARNING]
â”‚  - getSLAStatus() â†’ 'at-risk'
â”‚
â”œâ”€ 01:00 PM  [DEADLINE PASSED]
â”‚  - getSLAStatus() â†’ 'overdue'
â”‚  - Ticket still IN_PROGRESS
â”‚  - Red badge displayed
â”‚  - Escalation notification to Office Head
â”‚
â”œâ”€ 01:30 PM  [RESOLVED]
â”‚  - 30 minutes late
â”‚  - SLA Breach: âœ—
â”‚  - Compliance: 0% for this ticket
â”‚
â””â”€ Impacts overall SLA compliance percentage
```

## Key Takeaways for Visual Learners

1. **Ticket Flow**: Linear path from creation â†’ assignment â†’ progress â†’ resolution
2. **Multi-Table Updates**: Single action (status change) updates multiple tables atomically
3. **Auto-Assignment**: Load-based routing ensures even distribution
4. **Collaboration**: Multiple users can work on same ticket, all seeing shared timeline
5. **SLA Tracking**: Time-based alerts prevent deadline misses
6. **Analytics**: Aggregated data from ticket table powers dashboard visualizations
7. **Relationships**: One ticket connects to many notes, assignments, history entries
8. **Polymorphism**: Ticket â†’ MISTicket OR ITSTicket (not both)
